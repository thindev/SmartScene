<Application
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:SmartScene.View"
             xmlns:dragablz="clr-namespace:Dragablz;assembly=Dragablz"
             xmlns:mahApps="http://metro.mahapps.com/winfx/xaml/controls" 
             xmlns:Custom="http://metro.mahapps.com/winfx/xaml/shared" 
    xmlns:Converters="clr-namespace:Dragablz.Converters;assembly=Dragablz" x:Class="SmartScene.View.App"
             StartupUri="MainWindow.xaml" >
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colors.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/海蓝.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
                <ResourceDictionary Source="pack://application:,,,/SmartScene.View.Resources;component/Themes/Dragablz.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Style  TargetType="{x:Type GridSplitter}">
                <Setter Property="Background" Value="{DynamicResource AccentColorBrush2}"/>
            </Style>
                <Style TargetType="{x:Type dragablz:TabablzControl}" BasedOn="{StaticResource MahAppsTabablzControl}">
                <Setter Property="CustomHeaderItemTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="4,4,8,4">
                                <Path Fill="{Binding ElementName=content,Path=Foreground}" Stretch="Uniform" Margin="1,1,6,1" Height="18" VerticalAlignment="Center">
                                    <Path.Data>
                                        M208.938,331.094l11.875,29.688c-11.5,4.594-22.969,8.094-34.156,10.438l-6.531-31.313
	C189.5,337.938,199.188,334.969,208.938,331.094z M113.719,369.438c11.719,3.375,24.063,5.188,36.688,5.375l0.5-32
	c-9.813-0.156-19.344-1.531-28.344-4.125L113.719,369.438z M365.688,313.594c9.219,1.813,18.219,4.969,26.75,9.375l14.688-28.438
	c-11.25-5.781-23.094-9.938-35.25-12.313L365.688,313.594z M298.938,287.344l9.563,30.5c9.781-3.063,19.438-5,28.75-5.75
	l-2.563-31.875C323,281.156,310.969,283.563,298.938,287.344z M247.563,311.406c-3.594,2.25-7.125,4.313-10.594,6.25l15.563,27.938
	c3.906-2.188,7.906-4.5,11.906-7c5.5-3.406,10.875-6.438,16.156-9.125l-14.531-28.5C260.063,304.031,253.875,307.5,247.563,311.406z
	 M336,112c0,13.063-3.125,25.438-8.688,36.313L256,288c0,0-71.875-140.844-72.156-141.438C178.813,136.125,176,124.375,176,112
	c0-44.188,35.813-80,80-80S336,67.813,336,112z M304,112c0-26.5-21.5-48-48-48s-48,21.5-48,48s21.5,48,48,48S304,138.5,304,112z
	 M416,192h-75.063l-16.344,32h68.344l34.531,103.625l-11.031,12.188c11.75,10.625,17.844,20.406,17.875,20.438l3.375-2.031
	L467.594,448H44.375l32.063-96.094c1.125,0.781,2,1.531,3.25,2.313l17-27.063c-3.813-2.406-6.938-4.781-9.688-7L119.063,224h68.375
	c-6.781-13.25-12.125-23.719-16.344-32H96L0,480h512L416,192z
                                    </Path.Data>
                                </Path>
                                <ContentControl x:Name="content" Content="{Binding Title}" TextElement.FontSize="{DynamicResource NormalFontSize}" VerticalAlignment="Center"/>
                            </StackPanel>
                            
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ContentTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <mahApps:MetroContentControl >
                                <ContentPresenter Content="{Binding ContentView}"></ContentPresenter>
                            </mahApps:MetroContentControl>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="TabControlStyle1" TargetType="{x:Type TabControl}">
                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                <Setter Property="Padding" Value="0"/>
                <Setter Property="BorderThickness" Value="1,0,0,0"/>
                <Setter Property="BorderBrush" Value="#FF8C8E94"/>
                <Setter Property="Background" Value="#FFF9F9F9"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TabControl}">
                            <Grid ClipToBounds="True" SnapsToDevicePixels="True" KeyboardNavigation.TabNavigation="Local">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition x:Name="ColumnDefinition0"/>
                                    <ColumnDefinition x:Name="ColumnDefinition1" Width="0"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition x:Name="RowDefinition0" Height="Auto"/>
                                    <RowDefinition x:Name="RowDefinition1" Height="*"/>
                                </Grid.RowDefinitions>
                                <TabPanel x:Name="HeaderPanel" Grid.Column="0" IsItemsHost="True" Margin="0" Grid.Row="1" KeyboardNavigation.TabIndex="1" Panel.ZIndex="1" Background="{DynamicResource AccentColorBrush2}"/>
                                <Border x:Name="ContentPanel" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.Column="0" KeyboardNavigation.DirectionalNavigation="Contained" Grid.Row="0" KeyboardNavigation.TabIndex="2" KeyboardNavigation.TabNavigation="Local">
                                    <ContentPresenter x:Name="PART_SelectedContentHost" ContentTemplate="{TemplateBinding SelectedContentTemplate}" Content="{TemplateBinding SelectedContent}" ContentStringFormat="{TemplateBinding SelectedContentStringFormat}" ContentSource="SelectedContent" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                </Border>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="TabStripPlacement" Value="Bottom">
                                    <Setter Property="Grid.Row" TargetName="HeaderPanel" Value="1"/>
                                    <Setter Property="Grid.Row" TargetName="ContentPanel" Value="0"/>
                                    <Setter Property="Height" TargetName="RowDefinition0" Value="*"/>
                                    <Setter Property="Height" TargetName="RowDefinition1" Value="Auto"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="TabItemStyle1" TargetType="{x:Type TabItem}">
                <Setter Property="Foreground" Value="{DynamicResource WhiteColorBrush}"/>
                <Setter Property="Padding" Value="0"/>
                <Setter Property="Margin" Value="0"/>
                <Setter Property="Background" Value="{DynamicResource AccentColorBrush4}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TabItem}">
                            <Grid SnapsToDevicePixels="True">
                                <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" Margin="{TemplateBinding Margin}">
                                    <ContentPresenter x:Name="Content" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" ContentStringFormat="{TemplateBinding HeaderStringFormat}" ContentSource="Header" HorizontalAlignment="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type ItemsControl}}}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{Binding VerticalContentAlignment, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type ItemsControl}}}"/>
                                </Border>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" TargetName="Bd" Value="{DynamicResource AccentColorBrush2}">
                                        
                                    </Setter>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Panel.ZIndex" Value="1"/>
                                    <Setter Property="Background" TargetName="Bd" Value="{DynamicResource AccentColorBrush}"/>
                                </Trigger>

                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style TargetType="{x:Type local:MapNavigator}">
                <Style.Resources>
                    <Color x:Key="ToolItemMouseOverBackgroundColor" A="255" B="255" G="255" R="255"/>
                    <Color x:Key="ToolItemNormalBackgroundColor" A="255" B="80" G="80" R="80"/>
                    <Color x:Key="ToolItemMousePressedBackgroundColor" A="255" B="255" G="255" R="255"/>

                    <Color x:Key="ToolItemMouseOverBorderColor" A="255" B="255" G="255" R="255"/>
                    <Color x:Key="ToolItemNormalBorderColor" A="255" B="255" G="255" R="255"/>
                    <Color x:Key="ToolItemMousePressedBorderColor" A="255" B="0" G="0" R="0"/>

                    <SolidColorBrush x:Key="ToolItemMouseOverBackgroundBrush" Color="{DynamicResource AccentColor3}"/>
                    <SolidColorBrush x:Key="ToolItemMousePressedBackgroundBrush" Color="{DynamicResource AccentColor4}"/>
                    <SolidColorBrush x:Key="ToolItemNormalBackgroundBrush" Color="{DynamicResource AccentColor2}"/>

                    <SolidColorBrush x:Key="ToolItemCheckedForegroundBrush" Color="Black"/>
                    <SolidColorBrush x:Key="ToolItemCheckedBackgroundBrush" Color="White"/>
                    <SolidColorBrush x:Key="ToolItemCheckedBorderBrush" Color="Black"/>

                    <SolidColorBrush x:Key="ToolItemNormalForegroundBrush" Color="White"/>
                    <SolidColorBrush x:Key="ToolItemMouseOverForegroundBrush" Color="White"/>
                    <SolidColorBrush x:Key="ToolItemMousePressedForegroundBrush" Color="White"/>

                    <SolidColorBrush x:Key="ToolItemNormalBorderBrush" Color="{StaticResource ToolItemNormalBorderColor}"/>
                    <SolidColorBrush x:Key="ToolItemMouseOverBorderBrush" Color="{StaticResource ToolItemMouseOverBorderColor}"/>
                    <SolidColorBrush x:Key="ToolItemMousePressedBorderBrush" Color="{StaticResource ToolItemMousePressedBorderColor}"/>

                    <SolidColorBrush x:Key="ToolPanelBackgroundBrush" Color="{DynamicResource AccentColor}"/>
                    <SolidColorBrush x:Key="ToolPanelBorderBrush" Color="White"/>
                    <SolidColorBrush x:Key="ToolPanelForegroundBrush" Color="Gray"/>
                    <Style x:Key="NavigateButtonStyle" TargetType="{x:Type RepeatButton}">
                        <Setter Property="Foreground" Value="{DynamicResource ToolItemNormalForegroundBrush}"/>
                        <Setter Property="Background" Value="{StaticResource ToolItemNormalBackgroundBrush}"/>
                        <Setter Property="BorderBrush" Value="{StaticResource ToolItemNormalBorderBrush}"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type RepeatButton}">
                                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>

                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Trigger.Setters>
                                                <Setter Property="Background" Value="{StaticResource ToolItemMouseOverBackgroundBrush}"/>
                                                <Setter Property="BorderBrush" Value="{StaticResource ToolItemMouseOverBorderBrush}"/>
                                                <Setter Property="Foreground" Value="{StaticResource ToolItemMouseOverForegroundBrush}"/>
                                            </Trigger.Setters>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Trigger.Setters>
                                                <Setter Property="Background" Value="{StaticResource ToolItemMousePressedBackgroundBrush}"/>
                                                <Setter Property="BorderBrush" Value="{StaticResource ToolItemMousePressedBorderBrush}"/>
                                                <Setter Property="Foreground" Value="{StaticResource ToolItemMousePressedForegroundBrush}"/>
                                            </Trigger.Setters>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <Style x:Key="ZoomButtonStyle" TargetType="{x:Type Button}">
                        <Setter Property="Foreground" Value="{StaticResource ToolItemNormalForegroundBrush}"/>
                        <Setter Property="Background" Value="{StaticResource ToolItemNormalBackgroundBrush}"/>
                        <Setter Property="BorderBrush" Value="{StaticResource ToolItemNormalBorderBrush}"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="Padding" Value="1"/>
                        <Setter Property="Width" Value="24"/>
                        <Setter Property="Height" Value="24"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Button}">

                                    <Grid>
                                        <Ellipse x:Name="border" StrokeThickness="1" Fill="{TemplateBinding Background}" Stroke="{TemplateBinding BorderBrush}"/>
                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Trigger.Setters>
                                                <Setter Property="Background" Value="{StaticResource ToolItemMouseOverBackgroundBrush}"/>
                                                <Setter Property="BorderBrush" Value="{StaticResource ToolItemMouseOverBorderBrush}"/>
                                                <Setter Property="Foreground" Value="{StaticResource ToolItemMouseOverForegroundBrush}"/>
                                            </Trigger.Setters>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Trigger.Setters>
                                                <Setter Property="Background" Value="{StaticResource ToolItemMousePressedBackgroundBrush}"/>
                                                <Setter Property="BorderBrush" Value="{StaticResource ToolItemMousePressedBorderBrush}"/>
                                                <Setter Property="Foreground" Value="{StaticResource ToolItemMousePressedForegroundBrush}"/>
                                            </Trigger.Setters>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <Style x:Key="ZoomFullExtentButtonStyle" TargetType="{x:Type Button}">
                        <Setter Property="Background" Value="{StaticResource ToolItemNormalBackgroundBrush}"/>
                        <Setter Property="BorderBrush" Value="{StaticResource ToolItemNormalBorderBrush}"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="Foreground" Value="{StaticResource ToolItemNormalForegroundBrush}"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border x:Name="border" Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" CornerRadius="6">
                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Trigger.Setters>
                                                <Setter Property="Background" Value="{StaticResource ToolItemMouseOverBackgroundBrush}"/>
                                                <Setter Property="BorderBrush" Value="{StaticResource ToolItemMouseOverBorderBrush}"/>
                                                <Setter Property="Foreground" Value="{StaticResource ToolItemMouseOverForegroundBrush}"/>
                                            </Trigger.Setters>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Trigger.Setters>
                                                <Setter Property="Background" Value="{StaticResource ToolItemMousePressedBackgroundBrush}"/>
                                                <Setter Property="BorderBrush" Value="{StaticResource ToolItemMousePressedBorderBrush}"/>
                                                <Setter Property="Foreground" Value="{StaticResource ToolItemMousePressedForegroundBrush}"/>
                                            </Trigger.Setters>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <Style x:Key="MapToolBarToggleButtonStyle" TargetType="{x:Type ToggleButton}">
                        <Setter Property="Background" Value="{StaticResource ToolItemNormalBackgroundBrush}"/>
                        <Setter Property="BorderBrush" Value="{StaticResource ToolItemNormalBorderBrush}"/>
                        <Setter Property="Foreground" Value="{StaticResource ToolItemNormalForegroundBrush}"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="Width" Value="26"/>
                        <Setter Property="Height" Value="26"/>
                        <Setter Property="Margin" Value="3,0"/>
                        <Setter Property="Padding" Value="5"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ToggleButton}">
                                    <Grid>
                                        <Ellipse Stroke="{TemplateBinding BorderBrush}" Fill="{TemplateBinding Background}" StrokeThickness="1" ></Ellipse>
                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ToolItemMouseOverBackgroundBrush}"/>
                                            <Setter Property="Foreground" Value="{StaticResource ToolItemMouseOverForegroundBrush}"/>
                                            <Setter Property="BorderBrush" Value="{StaticResource ToolItemMouseOverBorderBrush}"/>
                                        </Trigger>
                                        <Trigger Property="IsChecked" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ToolItemCheckedBackgroundBrush}"/>
                                            <Setter Property="Foreground" Value="{StaticResource ToolItemCheckedForegroundBrush}"/>
                                            <Setter Property="BorderBrush" Value="{StaticResource ToolItemCheckedBorderBrush}"/>
                                        </Trigger>

                                        <Trigger Property="IsPressed" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ToolItemMousePressedBackgroundBrush}"/>
                                            <Setter Property="Foreground" Value="{StaticResource ToolItemMousePressedForegroundBrush}"/>
                                            <Setter Property="BorderBrush" Value="{StaticResource ToolItemMousePressedBorderBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <Style x:Key="MapToolBarButtonStyle" TargetType="{x:Type Button}">
                        <Setter Property="Background" Value="{StaticResource ToolItemNormalBackgroundBrush}"/>
                        <Setter Property="BorderBrush" Value="{StaticResource ToolItemNormalBorderBrush}"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="Foreground" Value="{StaticResource ToolItemNormalForegroundBrush}"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="Height" Value="24"/>
                        <Setter Property="Width" Value="24"/>
                        <Setter Property="Padding" Value="5"/>
                        <Setter Property="Margin" Value="3,0"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="4" >
                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ToolItemMouseOverBackgroundBrush}"/>
                                            <Setter Property="Foreground" Value="{StaticResource ToolItemMouseOverForegroundBrush}"/>
                                            <Setter Property="BorderBrush" Value="{StaticResource ToolItemMouseOverBorderBrush}"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ToolItemMousePressedBackgroundBrush}"/>
                                            <Setter Property="Foreground" Value="{StaticResource ToolItemMousePressedForegroundBrush}"/>
                                            <Setter Property="BorderBrush" Value="{StaticResource ToolItemMousePressedBorderBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Style.Resources>

                <Setter Property="Background" Value="{StaticResource ToolPanelBackgroundBrush}"/>
                <Setter Property="BorderBrush" Value="{StaticResource ToolPanelBorderBrush}"/>
                <Setter Property="Foreground" Value="{StaticResource ToolPanelForegroundBrush}"/>
                <Setter Property="HorizontalAlignment" Value="Left"/>
                <Setter Property="VerticalAlignment" Value="Top"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type local:MapNavigator}">
                            <Grid x:Name="LayoutRoot"  RenderTransformOrigin="{TemplateBinding RenderTransformOrigin}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Border  Name="ToolBar" Grid.Row="0" Grid.Column="0"  Margin="0,12,8,18" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"   BorderThickness="0" Padding="6,0" CornerRadius="16">
                                    <StackPanel  Orientation="Horizontal" >
                                        <ToggleButton x:Name="DragPan" Visibility="Collapsed" ToolTip="拖动地图" Style="{StaticResource MapToolBarToggleButtonStyle}">
                                            <Path  Fill="{Binding Foreground, ElementName=DragPan}" Stretch="Fill" Data="M164.012,49.209c-4.371-4.671-10.332-6.979-17.883-6.925c-4.184-3.259-9.018-4.888-14.502-4.888  c-1.195,0-2.363,0.081-3.504,0.244c-3.096-1.792-6.328-2.797-9.695-3.014V20.857c0-5.703-2.062-10.605-6.191-14.706  C108.109,2.051,103.193,0,97.49,0c-5.595,0-10.456,2.064-14.584,6.192c-4.128,4.129-6.192,9.017-6.192,14.666v30.471  c-3.259-1.194-6.735-1.792-10.429-1.792c-6.626,0-11.759,2.214-15.398,6.64c-3.639,4.427-5.458,10.035-5.458,16.824  c0,2.063,0.475,3.952,1.426,5.662s2.295,3.205,4.033,4.481c1.738,1.276,3.449,2.375,5.133,3.3c1.684,0.924,3.639,1.928,5.866,3.014  c2.227,1.086,3.91,1.983,5.051,2.688c2.987,1.9,6.49,4.617,10.51,8.146c0.163,0.11,0.625,0.491,1.385,1.141  c0.761,0.653,1.345,1.168,1.752,1.549c0.407,0.381,0.991,0.938,1.751,1.671c0.76,0.732,1.371,1.385,1.833,1.954  c0.461,0.57,0.95,1.183,1.466,1.834c0.516,0.651,0.896,1.289,1.141,1.914c0.245,0.625,0.367,1.209,0.367,1.752v23.465  c0,2.879,1.018,5.336,3.055,7.373c2.037,2.037,4.495,3.056,7.374,3.056h52.141c2.879,0,5.337-1.019,7.374-3.056  c2.036-2.036,3.056-4.494,3.056-7.373v-23.465c0-3.205,1.603-9.261,4.808-18.168c3.748-10.266,5.62-19.012,5.62-26.234  C170.57,60.046,168.387,53.881,164.012,49.209z M148.167,134.023c-1.033,1.031-2.255,1.549-3.667,1.549s-2.634-0.518-3.666-1.549  s-1.548-2.254-1.548-3.666s0.516-2.635,1.548-3.666c1.032-1.032,2.254-1.549,3.666-1.549s2.634,0.517,3.667,1.549  c1.031,1.031,1.547,2.254,1.547,3.666S149.198,132.992,148.167,134.023z M157.537,82.737c-1.738,5.35-3.477,10.605-5.215,15.766  c-1.738,5.159-2.607,9.695-2.607,13.604v2.607H97.573v-2.607c0-3.855-1.548-7.657-4.644-11.405  c-1.358-1.629-4.237-4.374-8.636-8.229c-4.399-3.91-8.337-6.953-11.813-9.125c-1.141-0.707-2.906-1.711-5.296-3.016  c-7.55-3.584-11.325-6.028-11.325-7.332c0-3.856,0.828-6.993,2.485-9.41c1.656-2.417,4.304-3.625,7.943-3.625  c2.336,0,4.631,0.407,6.885,1.222c2.254,0.814,4.101,1.71,5.54,2.688s2.933,1.874,4.481,2.689c1.549,0.815,2.866,1.222,3.952,1.222  V20.858c0-2.715,1.046-5.132,3.137-7.251c2.091-2.118,4.521-3.177,7.292-3.177c2.825,0,5.269,1.032,7.333,3.096  c2.064,2.064,3.096,4.508,3.096,7.333v26.967c0.924-0.815,2.213-1.494,3.87-2.037c1.656-0.543,3.164-0.815,4.521-0.815  c3.748,0,6.979,1.439,9.694,4.318c1.738-0.978,3.613-1.467,5.622-1.467c2.01,0,4.006,0.476,5.988,1.426  c1.982,0.951,3.408,2.241,4.277,3.87c1.629-0.271,3.149-0.407,4.562-0.407c9.069,0,13.606,5.132,13.606,15.398  C160.145,72.511,159.275,77.387,157.537,82.737z" />
                                        </ToggleButton>
                                        <ToggleButton x:Name="DrawForZoomIn" ToolTip="放大到范围" Style="{StaticResource MapToolBarToggleButtonStyle}" >
                                            <Path  Fill="{Binding Foreground, ElementName=DrawForZoomIn}" Stretch="Fill" Data="M46.599 46.599c-1.758 1.758-4.605 1.758-6.363 0l-7.941-7.941c-3.267 2.091-7.128 3.342-11.295 3.342-11.598 0-21-9.402-21-21s9.402-21 21-21 21 9.402 21 21c0 4.167-1.251 8.028-3.342 11.295l7.941 7.941c1.758 1.758 1.758 4.605 0 6.363zm-25.599-40.599c-8.283 0-15 6.717-15 15 0 8.286 6.717 15 15 15 8.286 0 15-6.714 15-15 0-8.283-6.714-15-15-15zm6 18h-3v3c0 1.659-1.341 3-3 3s-3-1.341-3-3v-3h-3c-1.656 0-3-1.344-3-3s1.344-3 3-3h3v-3c0-1.656 1.341-3 3-3s3 1.344 3 3v3h3c1.659 0 3 1.344 3 3s-1.341 3-3 3z"/>
                                        </ToggleButton>
                                        <ToggleButton x:Name="DrawForZoomOut" ToolTip="缩小到范围" Style="{StaticResource MapToolBarToggleButtonStyle}" >
                                            <Path  Fill="{Binding Foreground, ElementName=DrawForZoomOut}" Stretch="Fill" Data="M46.599 46.599c-1.758 1.758-4.605 1.758-6.363 0l-7.941-7.941c-3.267 2.091-7.128 3.342-11.295 3.342-11.598 0-21-9.402-21-21s9.402-21 21-21 21 9.402 21 21c0 4.167-1.251 8.028-3.342 11.295l7.941 7.941c1.758 1.758 1.758 4.605 0 6.363zm-25.599-40.599c-8.283 0-15 6.717-15 15 0 8.286 6.717 15 15 15 8.286 0 15-6.714 15-15 0-8.283-6.714-15-15-15zm6 18h-12c-1.656 0-3-1.344-3-3s1.344-3 3-3h12c1.659 0 3 1.344 3 3s-1.341 3-3 3z"/>
                                        </ToggleButton>
                                        <Button x:Name="PreviousExtent" ToolTip="上一视图" Style="{StaticResource MapToolBarButtonStyle}">
                                            <Path  Fill="{Binding Foreground, ElementName=PreviousExtent}" Stretch="Fill" Data="M418,21L183,206c-5,4-8,10-8,17s3,13,8,17l235,185c4,3,8,5,13,5c13,0,22-11,22-22V38C453,22,434,9,418,21z M409,363   L232,223L409,83V363z M81,22c-14,0-24,11-24,25v356c0,14,10,25,24,25s25-11,25-25V47C106,33,95,22,81,22z"/>
                                        </Button>
                                        <Button x:Name="NextExtent" ToolTip="下一视图"  Style="{DynamicResource MapToolBarButtonStyle}">
                                            <Path  Fill="{Binding Foreground, ElementName=NextExtent}" Stretch="Fill" Data="M328,206L94,21C78,9,59,22,59,38v370c0,11,9,22,22,22c5,0,9-2,13-5l234-185c5-4,9-10,9-17S333,210,328,206z M102,363V83   l178,140L102,363z M427,22c-14,0-25,11-25,25v356c0,14,11,25,25,25s24-11,24-25V47C451,33,441,22,427,22z"/>
                                        </Button>
                                    </StackPanel>
                                </Border>
                                <Border x:Name="ZoomContainer" Grid.Row="1" Grid.Column="1" Grid.RowSpan="2"  Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" HorizontalAlignment="Center"  BorderThickness="0" CornerRadius="14" Margin="0,4,0,0" Padding="1,3">
                                    <Grid  Margin="0,0,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        <Button x:Name="ZoomInButton" Margin="2,2,2,0"  Grid.Row="0" ToolTip="放大"  Style="{StaticResource ZoomButtonStyle}">
                                            <Path Margin="5"  Data="M52,29H35V12c0-1.657-1.343-3-3-3s-3,1.343-3,3v17H12c-1.657,0-3,1.343-3,3s1.343,3,3,3h17v17c0,1.657,1.343,3,3,3     s3-1.343,3-3V35h17c1.657,0,3-1.343,3-3S53.657,29,52,29z" Stretch="Uniform" Fill="{Binding ElementName=ZoomInButton, Path=Foreground}"/>
                                        </Button>
                                        <Slider x:Name="ZoomSlider" Cursor="Hand" Height="89" LargeChange="1" Maximum="15" Minimum="0" Orientation="Vertical" Grid.Row="1" SmallChange="1" ToolTip="拖动进行缩放" Value="0" VerticalAlignment="Top" HorizontalAlignment="Center"/>
                                        <Button x:Name="ZoomOutButton" Margin="2,0,2,2"    Style="{StaticResource ZoomButtonStyle}"  Grid.Row="2" ToolTip="缩小" >
                                            <Path Margin="5"  Data="M52,29H12c-1.657,0-3,1.343-3,3s1.343,3,3,3h40c1.657,0,3-1.343,3-3S53.657,29,52,29z" Stretch="Uniform" Fill="{Binding ElementName=ZoomOutButton, Path=Foreground}"/>
                                        </Button>
                                    </Grid>
                                </Border>
                                <Grid x:Name="Navigator" VerticalAlignment="top" HorizontalAlignment="Left" Height="66"  Width="66" Grid.Column="1"  Grid.Row="0">
                                    <Grid.RenderTransform>
                                        <RotateTransform Angle="0"/>
                                    </Grid.RenderTransform>
                                    <Ellipse StrokeThickness="0" Stroke="{TemplateBinding BorderBrush}"  Fill="{TemplateBinding Background}"/>
                                    <Grid Margin="2">
                                        <RepeatButton x:Name="PanLeft" Style="{StaticResource NavigateButtonStyle}" Interval="{TemplateBinding Interval}" Delay="{TemplateBinding Delay}" Cursor="Hand" HorizontalAlignment="Left" Margin="0" ToolTip="视图向东移" VerticalAlignment="Center" Width="25" Height="25">
                                            <Path Data="M0,12.732 10.731,25.465 10.731,18.027 20,18.025 20,7.439 10.731,7.438 10.731,0 0,12.732"   Margin="1,0,5,0" Stretch="Fill"  Fill="{Binding ElementName=PanLeft,Path=Background}" Stroke="{Binding ElementName=PanLeft,Path=BorderBrush}"/>
                                        </RepeatButton>
                                        <RepeatButton x:Name="PanRight" Style="{StaticResource NavigateButtonStyle}" Interval="{TemplateBinding Interval}" Delay="{TemplateBinding Delay}" Cursor="Hand" HorizontalAlignment="Right" Margin="0" RenderTransformOrigin="0.5,0.5" ToolTip="视图向西移" VerticalAlignment="Center" Width="25" Height="25">
                                            <RepeatButton.RenderTransform>
                                                <RotateTransform Angle="180"/>
                                            </RepeatButton.RenderTransform>
                                            <Path Data="M0,12.732 10.731,25.465 10.731,18.027 20,18.025 20,7.439 10.731,7.438 10.731,0 0,12.732"   Margin="1,0,5,0" Stretch="Fill"  Fill="{Binding ElementName=PanRight,Path=Background}" Stroke="{Binding ElementName=PanRight,Path=BorderBrush}"/>
                                        </RepeatButton>
                                        <RepeatButton x:Name="PanUp" Style="{StaticResource NavigateButtonStyle}" Interval="{TemplateBinding Interval}" Delay="{TemplateBinding Delay}" Cursor="Hand" HorizontalAlignment="Center" Height="25" Width="25" Margin="0" RenderTransformOrigin="0.5,0.5" ToolTip="视图向北移" VerticalAlignment="Top">
                                            <RepeatButton.RenderTransform>
                                                <RotateTransform Angle="90"/>
                                            </RepeatButton.RenderTransform>
                                            <Path Data="M0,12.732 10.731,25.465 10.731,18.027 20,18.025 20,7.439 10.731,7.438 10.731,0 0,12.732"   Margin="1,0,5,0" Stretch="Fill" Fill="{Binding ElementName=PanUp,Path=Background}" Stroke="{Binding ElementName=PanUp,Path=BorderBrush}"/>
                                        </RepeatButton>
                                        <RepeatButton x:Name="PanDown" Style="{StaticResource NavigateButtonStyle}" Interval="{TemplateBinding Interval}" Delay="{TemplateBinding Delay}" Cursor="Hand" HorizontalAlignment="Center" Height="25" Width="25" Margin="0" RenderTransformOrigin="0.5,0.5" ToolTip="视图向南移" VerticalAlignment="Bottom">
                                            <RepeatButton.RenderTransform>
                                                <RotateTransform Angle="270"/>
                                            </RepeatButton.RenderTransform>
                                            <Path Data="M0,12.732 10.731,25.465 10.731,18.027 20,18.025 20,7.439 10.731,7.438 10.731,0 0,12.732"   Margin="1,0,5,0" Stretch="Fill" Fill="{Binding ElementName=PanDown,Path=Background}" Stroke="{Binding ElementName=PanDown,Path=BorderBrush}"/>
                                        </RepeatButton>
                                        <Button x:Name="ZoomFullExtent" Cursor="Hand"  HorizontalAlignment="Center" Height="20" ToolTip="缩放到满图" VerticalAlignment="Center" Width="20" Style="{DynamicResource ZoomFullExtentButtonStyle}">
                                            <Grid Height="14" Width="14">
                                                <Ellipse Stroke="{Binding ElementName=ZoomFullExtent, Path=Foreground}" Height="Auto"  Width="Auto"/>
                                                <Ellipse Stroke="{Binding ElementName=ZoomFullExtent, Path=Foreground}" Height="6"  Width="Auto"/>
                                                <Ellipse Stroke="{Binding ElementName=ZoomFullExtent, Path=Foreground}" Height="Auto"  Width="6"/>
                                            </Grid>
                                        </Button>
                                    </Grid>
                                </Grid>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        
        </ResourceDictionary>
    </Application.Resources>

</Application>
